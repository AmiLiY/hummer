{% extends "website/base_dashboard.html" %}

{% load staticfiles %}


{% block main-content %}
<h2>公共镜像信息</h2>
<hr>
<table class="table w50">
    <tbody>
        <tr>
            <td> <b>镜像名称：</b> {{ image.name }}</td>
            <td> <b>镜像版本：</b> {{ image.version }}</td>
        </tr>
        <tr>
            <td> <b>镜像类型：</b>
            {% if not image.is_public %}
            私有镜像
            {% else %}
            公共镜像
            {% endif %}
            </td>
            <td> <b>镜像状态：</b> {{ image.status }}</td>
        </tr>
        <tr>
            <td colspan="2"> <b>Token：</b> {{ image.token }}</td>
        </tr>
        <tr>
            <td colspan="2"> <b>Digest：</b> {{ image.digest }}</td>
        </tr>
        <tr>
            <td colspan="2"> <b>创建时间：</b> {{ image.create_time }}</td>
        </tr>
        <tr>
            <td colspan="2"> <b>镜像说明：</b> {{ image.desc }}</td>
        </tr>
    </tbody>
</table>

{% if not is_staff %}
<hr>
<h2 class="page-header">克隆镜像</h2>
<div class="clone-public">
    <form class="form-horizontal">
        <div class="form-group">
            <label for="project" class="col-sm-2 control-label">克隆到项目</label>
            <div class="col-sm-3">
                <select class="form-control" id="project" name="project">
                    {% for project in projects %}
                        <option value="{{ project.id }}">{{ project.name }}</option>
                    {% endfor %}
                </select>
            </div>
        </div>

        <div class="form-group">
            <label for="imagename" class="col-sm-2 control-label">新镜像名称</label>
            <div class="col-sm-6">
                <input type="text" class="form-control" id="imagename" name="name" maxlength="32" placeholder="镜像名称">
            </div>
        </div>

        <div class="form-group">
            <label for="version" class="col-sm-2 control-label">新镜像版本</label>
            <div class="col-sm-6">
                <input type="text" class="form-control" id="version" name="version" maxlength="32" placeholder="镜像版本">
            </div>
        </div>

        <div class="form-group">
            <div class="col-sm-4 col-sm-offset-2">
                <input type="button" class="btn btn-success submit" value="  克 隆 ">
                <p class="submit-notice"></p>
            </div>
        </div>
    </form>
</div>
{% endif %}
{% endblock %}


{% block script %}
<script src="{% static 'website/js/public_image.js' %}"></script>
{% endblock %}
